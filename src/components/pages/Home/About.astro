---
import { ChevronRightIcon } from '@heroicons/react/20/solid';
import Header from '../../UI/Header.astro';

const aboutUsResponse = await fetch(
  'https://evys-api-production.up.railway.app/graphql',
  {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      query: `
      query {
        aboutUsImages {
          data {
            attributes {
              image {
                data {
                  attributes {
                    url
                  }
                }
              }
              location
            }
          }
        }
      }
    `,
    }),
  },
);

const json = await aboutUsResponse.json();
const data = json.data.aboutUsImages.data;

const smallLandscapeImage = data.find(
  (item: any) => item.attributes.location === 'small_landscape',
);

const largeLandscapeImage = data.find(
  (item: any) => item.attributes.location === 'large_landscape',
);

const portraitImage = data.find(
  (item: any) => item.attributes.location === 'portrait',
);
---

<div class="max-w-screen-xl mx-auto px-4 md:px-8">
  <div class="absolute w-3/4 inset-0 h-full rounded-xl z-0 blur-3xl"></div>
  <div
    class="relative flex flex-col md:flex-row md:justify-between md:gap-6 lg:gap-12"
  >
    <div class="relative z-10 flex flex-col">
      <Header
        color="cyan"
        subTitle="Meist"
        header="Kes me oleme?"
        headerClassName="!text-3xl lg:!text-5xl lg:!leading-tight"
        text="Eesti Veterinaarmeditsiini Üliõpilaste Selts (EVÜS) asutati Tartus 2013. aastal, et ühendada enda alla veterinaarmeditsiini õppivad Eesti tudengid. Seltsisiseselt korraldatakse erialaseid loenguid, õpitubasid ja väljasõite ning vabaajaüritusi, et tuua erinevate kursuste üliõpilased teineteisele lähemale."
      />
      <div class="hidden md:block mt-6">
        <a href="/info">
          <button
            class="flex items-center gap-0.5 hover:gap-2 text-cyan-600 hover:text-cyan-700 transition-all"
          >
            <span class="text-base lg:text-lg lg:font-semibold"
              >Loe meist rohkem</span
            >
            <ChevronRightIcon className="text-inherit w-5 h-5" />
          </button>
        </a>
      </div>
    </div>
    <div
      class="relative lg:grid lg:grid-cols-2 lg:grid-rows-2 mt-12 md:mt-0 lg:w-3/4"
    >
      <div class="absolute -top-60 left-0 w-full h-full blur-3xl">
        <svg
          id="sw-js-blob-svg"
          viewBox="0 0 100 100"
          xmlns="http://www.w3.org/2000/svg"
          fill-opacity=".5"
        >
          <defs>
            <linearGradient id="sw-gradient" x1="0" x2="1" y1="1" y2="0">
              <stop id="stop1" stop-color="rgba(225, 29, 72, 1) " offset="0%"
              ></stop>
              <stop id="stop2" stop-color="rgba(8, 145, 178, 1)" offset="100%"
              ></stop>
            </linearGradient>
          </defs>
          <path
            fill="url(#sw-gradient)"
            d="M19.1,-31.4C23.1,-30.8,23.5,-22.3,19.7,-15.7C16,-9.2,8.1,-4.6,8,-0.1C7.9,4.5,15.5,8.9,16.1,9.9C16.6,10.9,10,8.4,6.1,13.5C2.3,18.6,1.1,31.3,-1.9,34.6C-5,38,-10,32,-14,27C-17.9,21.9,-20.9,17.8,-19.2,13.5C-17.5,9.1,-11.3,4.6,-14,-1.5C-16.6,-7.7,-28.3,-15.3,-29.2,-18.4C-30.1,-21.4,-20.2,-19.7,-13.6,-18.7C-7,-17.8,-3.5,-17.5,2,-21C7.6,-24.6,15.1,-32,19.1,-31.4Z"
            width="100%"
            height="100%"
            transform="translate(50 50)"
            stroke-width="0"
            style="transition: all 0.3s ease 0s;"
            stroke="url(#sw-gradient)"></path>
        </svg>
      </div>
      <div class="lg:justify-end hidden lg:flex lg:items-center">
        <div
          class="rounded-lg overflow-hidden z-20 shadow-lg w-3/4 h-fit mr-8 mt-2"
        >
          <img
            src={smallLandscapeImage.attributes.image.data.attributes.url}
            alt="image"
            class="object-cover"
          />
        </div>
      </div>
      <div class="relative flex lg:justify-center items-center row-span-2">
        <div
          class="relative rounded-lg overflow-hidden z-20 shadow-lg h-full w-fit max-h-96 max-w-md md:max-h-full"
        >
          <img
            src={portraitImage.attributes.image.data.attributes.url}
            alt="image"
            class="h-full object-cover"
          />
        </div>
      </div>
      <div class="justify-end hidden lg:flex">
        <div
          class="relative rounded-lg overflow-hidden z-20 shadow-lg h-full w-full mt-8 mr-12"
        >
          <img
            src={largeLandscapeImage.attributes.image.data.attributes.url}
            alt="image"
            class="object-cover h-full w-full"
          />
        </div>
      </div>
    </div>
    <div class="mt-12 md:hidden">
      <a href="/info">
        <button
          class="flex items-center gap-0.5 hover:gap-2 text-cyan-600 hover:text-cyan-700 transition-all"
        >
          <span class="text-base lg:text-lg font-semibold"
            >Loe meist rohkem</span
          >
          <ChevronRightIcon className="text-inherit w-5 h-5" />
        </button>
      </a>
    </div>
  </div>
</div>
