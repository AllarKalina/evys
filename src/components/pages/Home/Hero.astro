---
import { Image } from '@astrojs/image/components';
import Header from '../../UI/Header.astro';

const response = await fetch(
  'http://localhost:1337/api/galleries?populate=image',
);

const dataFetch = await response.json();
const data = dataFetch.data;
---

<div
  class="absolute -top-[5%] -left-[15%] h-[60%] lg:h-[44%] w-[120%] z-0 bg-gradient-to-br from-zinc-400/90 via-emerald-600 to-zinc-600 -rotate-3"
>
</div>
<div
  class="z-20 relative px-4 pt-[160px] lg:pt-[160px] flex flex-col gap-20 max-w-screen-xl mx-auto"
>
  <div class="absolute top-1/3 -right-24 lg:top-20 lg:-left-8">
    <svg width={200} height={200} fill="none" viewBox="0 0 200 200">
      <defs>
        <pattern
          id="837c3e70-6c3a-44e6-8854-cc48c737b659"
          x={0}
          y={0}
          width={20}
          height={20}
          patternUnits="userSpaceOnUse"
        >
          <rect
            x={0}
            y={0}
            width={4}
            height={4}
            class="text-zinc-100"
            fill="currentColor"></rect>
        </pattern>
      </defs>
      <rect
        width={200}
        height={200}
        fill="url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"></rect>
    </svg>
  </div>
  {/* Hero section */}
  <div class="lg:flex lg:justify-between lg:gap-16">
    {/* Desktop images */}
    <article
      class="lg:flex flex-col hidden gap-12 flex-grow md:items-end lg:items-start"
    >
      {
        data.slice(2).map((item: any) => {
          return (
            <div class="w-[260px] h-[330px] overflow-hidden rounded-tl-lg rounded-br-lg -rotate-1 shadow-lg">
              <Image
                src={
                  'http://localhost:1337' +
                  item.attributes.image.data.attributes.formats.large.url
                }
                width={
                  item.attributes.image.data.attributes.formats.large.width
                }
                height={
                  item.attributes.image.data.attributes.formats.large.height
                }
                aspectRatio="6:9"
                alt="image"
                format="webp"
                fit="contain"
                class="w-full h-full"
              />
            </div>
          );
        })
      }
    </article>
    {/* Hero header */}
    <header class="flex flex-col gap-6 lg:items-end">
      <h1
        class="text-4xl text-white font-semibold sm:text-5xl md:text-6xl xl:text-7xl xl:leading-tight lg:tracking-wider"
      >
        Eesti Veterinaarmeditsiini <br class="sm:visible" /> Üliõpilaste
        <br class="sm:hidden" /> Selts
      </h1>
      <article class="hidden lg:flex items-start w-full mt-12 lg:gap-12">
        <div class="lg:flex flex-col hidden gap-12">
          {
            data.slice(2, 4).map((item: any) => {
              return (
                <div class="w-[260px] h-[330px] overflow-hidden rounded-tl-lg rounded-br-lg -rotate-1 shadow-lg">
                  <Image
                    src={
                      'http://localhost:1337' +
                      item.attributes.image.data.attributes.formats.large.url
                    }
                    width={
                      item.attributes.image.data.attributes.formats.large.width
                    }
                    height={
                      item.attributes.image.data.attributes.formats.large.height
                    }
                    aspectRatio="6:9"
                    alt="image"
                    format="webp"
                    fit="contain"
                    class="w-full h-full"
                  />
                </div>
              );
            })
          }
        </div>
        <div class="flex flex-1 justify-center pt-48">
          <Header
            subheader="MEIE MISSIOON"
            header="Tutvustada ja arendada veterinaarmeditsiini eriala üliõpilaste õppe- ja teadustööd."
            text="Pakkudes loomaarstiks õppivatele tudengitele erinevaid võimalusi mitmekülgseks arenguks, eneseteostuseks ja meeleolukateks tudengiaastateks, loodame kaasa aidata nende oskuste täienemisse."
          />
        </div>
      </article>
    </header>
  </div>
  {/* Mobile images */}
  <div class="flex shrink-0 gap-5 justify-center lg:hidden sm:gap-7 md:gap9">
    {
      data.map((item: any) => {
        return (
          <div class="overflow-hidden flex-none rounded-lg -rotate-2 shadow-lg w-[180px] aspect-[4/5]">
            <Image
              src={
                'http://localhost:1337' +
                item.attributes.image.data.attributes.formats.medium.url
              }
              width={item.attributes.image.data.attributes.formats.medium.width}
              height={
                item.attributes.image.data.attributes.formats.medium.height
              }
              alt="image"
              format="webp"
              class="absolute inset-0 h-full w-full object-cover"
              quality={100}
            />
          </div>
        );
      })
    }
  </div>
  {/* Mobile our mission section */}
  <div class="lg:hidden">
    <Header
      subheader="MEIE MISSIOON"
      header="Tutvustada ja arendada veterinaarmeditsiini eriala üliõpilaste õppe- ja teadustööd."
      text="Pakkudes loomaarstiks õppivatele tudengitele erinevaid võimalusi mitmekülgseks arenguks, eneseteostuseks ja meeleolukateks tudengiaastateks, loodame kaasa aidata nende oskuste täienemisse."
    />
  </div>
</div>
