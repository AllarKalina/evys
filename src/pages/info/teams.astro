---
import clsx from "clsx";
import Teams from "../../components/pages/Info/Teams";
import AnimatedBlock from "../../components/UI/Animated/AnimatedBlock";
import AnimatedHeader from "../../components/UI/Animated/AnimatedHeader";
import SectionWrapper from "../../components/UI/SectionWrapper.astro";
import Layout from "../../layouts/Layout.astro";
import { getAssetURL } from "../../utils/get-asset-url";
import { getDirectusClient } from "../../utils/get-directus-client";

type Leader = {
  name: string;
  team: string;
  image: string;
  order: number;
};

type Team = {
  id: string;
  name: string;
  description: string;
  image: string;
  order: number;
};

const directus = await getDirectusClient();
const leaders = (
  await directus.items("leader").readByQuery({ sort: ["order" as never] })
).data as Leader[];
const teams = (
  await directus.items("team").readByQuery({ sort: ["order" as never] })
).data as Team[];
---

<Layout title="Eesti Veterinaarmeditsiini Üliõpilaste Selts">
  <SectionWrapper>
    <div
      class="relative mx-auto max-w-3xl px-4 pt-20 md:pt-8 lg:pt-0 2xl:max-w-5xl"
    >
      <AnimatedHeader client:load delay={0.24}>
        Juhatus ja meeskonnad
      </AnimatedHeader>
      <AnimatedBlock client:load delay={0.42}>
        <p class="my-5 text-base leading-7 text-zinc-600 lg:text-lg">
          Seltsil on viieliikmeline juhatus, mis koosneb esimehest ja neljast
          juhatuse liikmest, kellest viimased vastutavad oma toimkonna tegevuse
          eest. Juhatuse ja meeskonddade ülesannete kohta saate täpsemalt lugeda
          seltsi põhikirjast, kodukorrast või toimkondade lingi alt.
        </p>
        <h2
          class="mt-8 mb-4 text-xl font-semibold leading-6 text-emerald-600 lg:text-2xl"
        >
          Juhatuse liikmed 2022/2023
        </h2>
        <ul
          role="list"
          class="mt-8 mb-5 space-y-8 sm:grid sm:grid-cols-2 sm:gap-6 sm:space-y-0 lg:grid-cols-3 lg:gap-8"
        >
          {
            leaders.map((leader, idx) => (
              <li>
                <div class="space-y-3">
                  <div class="h-56 w-full overflow-hidden rounded-lg">
                    <img
                      loading="lazy"
                      src={getAssetURL({
                        id: leader.image,
                        width: 300,
                        height: 300,
                        fit: "cover",
                        quality: 90,
                      })}
                      class="shadow-lg"
                    />
                  </div>

                  <div class="space-y-3">
                    <div class="space-y-1 leading-6 text-zinc-700">
                      <h3 class="text-lg font-semibold  lg:text-xl">
                        {leader.name}
                      </h3>
                      <p
                        class={clsx(
                          "text-md font-medium !leading-6 lg:text-lg",
                          idx === 0 && "text-emerald-600 ",
                          idx === 1 && "text-cyan-600",
                          idx === 2 && "text-amber-600",
                          idx === 3 && "text-violet-800",
                          idx === 4 && "text-rose-600"
                        )}
                      >
                        {leader.team}
                      </p>
                    </div>
                  </div>
                </div>
              </li>
            ))
          }
        </ul>
        <h2
          class="mt-8 text-xl font-semibold leading-6 text-emerald-600 lg:text-2xl"
        >
          Meeskonnad
        </h2>
        <p class="mt-5 text-base leading-7 text-zinc-600 lg:text-lg">
          Seltsil on viieliikmeline juhatus, mis koosneb esimehest ja neljast
          meeskonna juhist. Juhatuse ja meeskondade ülesannete kohta saab
          täpsemalt lugeda seltsi põhikirjast, kodukorrast või meeskondade lingi
          alt.
        </p>
      </AnimatedBlock>
    </div>
    <div
      class="mx-auto mt-8 max-w-3xl overflow-hidden rounded-lg border border-zinc-100 bg-slate-50 p-8 lg:max-w-5xl 2xl:max-w-7xl"
    >
      <Teams client:visible teams={teams} />
    </div>
  </SectionWrapper>
</Layout>
